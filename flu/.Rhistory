###
# ATTACH LIBRARIES
###
library(sas7bdat)
library(rgdal)
library(RColorBrewer)
library(gstat)
library(geoR)
###
# SETWD CONDITIONAL TO SYSTEM I'M ON
###
if ( Sys.info()["sysname"] == "Linux" ){
setwd("/home/joebrew/Documents/")
} else {
setwd("C:/Users/BrewJR/Documents/")
}
###
# READ IN BRFSS DATA
###
dat <- read.sas7bdat("fdoh_private/brfss/alachua.sas7bdat")
names(dat)
names(dat[which(grepl("HRQ", names(dat)))])
source('~/.active-rstudio-document', echo=TRUE)
table(bu$school)
install.packages("rgl")
library(rgl)
###
# set working directory (this is a conditional depending on whose computer is being used)
###
if ( Sys.info()["sysname"] == "Linux" ){
public <- "/home/joebrew/Documents/benbrew/flu"
private <- "/media/joebrew/JB/fdoh/private/ben"
} else if(Sys.info()["user"] == "BrewJR" ){
public <- "C:/Users/BrewJR/Documents/benbrew/flu"
private <- "E:/fdoh/private/ben"
} else {
public <- "C:/Users/benbrew/Documents/benbrew/flu"
private <- "C:/Users/benbrew/Documents/private/"
}
setwd(public)
###
# read in private data (private, stored in private directory)
###
setwd(private)
dat <- read.csv("obesity_flu_absences_merged.csv")
###
# read in nurse data (stored in the public directory)
###
setwd(public)
nurses <- read.csv("nurses.csv")
###
# check to see if any nurses worked in more than one place
###
# the following will group nurses by each nurse and
# get the number of schools each has worked out
library(dplyr)
nurses %>%
group_by(nurse) %>%
summarise(x = length(unique(school))) %>%
arrange(desc(x))
###
# explore a bit (and consider cleaning for outliers)
###
# relationship b/w height and weight
plot(dat$height, dat$weight,
col = adjustcolor("blue", alpha.f = 0.2),
pch = 16,
xlab = "Height (inches)",
ylab = "Weight (pounds)")
points(dat$height, dat$weight,
col = adjustcolor("black", alpha.f = 0.2))
# age in months (divide by 12 to get years)
hist(dat$age / 12,
xlab = "Age",
breaks = 100,
xlim = c(0,20),
col = adjustcolor("black", alpha.f = 0.6),
main = NA)
# table of obesity category by race
x <- round(prop.table(table(dat$cat, dat$race), margin = 2) * 100, digits = 1)
x
barplot(x, beside = T, legend = T)
abline(h=seq(0,100,10), col = adjustcolor("black", alpha.f = 0.2),
lty = 6)
# 3d scatterplot of height, weight, and age
library(rgl)
scatter3d(dat$weight ~ dat$height + dat$age_months,
fit="smooth", #linear, smooth, additive
ylab="Weight", xlab="Height", zlab="Age",
axis.col=c("darkmagenta", "black", "darkcyan"),
surface.col=c("blue", "green", "orange", "magenta", "cyan", "red",
"yellow", "gray"), surface.alpha=0.3,
neg.res.col="red", pos.res.col="darkgreen",
point.col = "darkblue")
library(rgl)
install.packages("rgl")
install.packages("rgl")
# 3d scatterplot of height, weight, and age
library(rgl)
scatter3d(dat$weight ~ dat$height + dat$age_months,
fit="smooth", #linear, smooth, additive
ylab="Weight", xlab="Height", zlab="Age",
axis.col=c("darkmagenta", "black", "darkcyan"),
surface.col=c("blue", "green", "orange", "magenta", "cyan", "red",
"yellow", "gray"), surface.alpha=0.3,
neg.res.col="red", pos.res.col="darkgreen",
point.col = "darkblue")
library(car)
scatter3d(dat$weight ~ dat$height + dat$age_months,
fit="smooth", #linear, smooth, additive
ylab="Weight", xlab="Height", zlab="Age",
axis.col=c("darkmagenta", "black", "darkcyan"),
surface.col=c("blue", "green", "orange", "magenta", "cyan", "red",
"yellow", "gray"), surface.alpha=0.3,
neg.res.col="red", pos.res.col="darkgreen",
point.col = "darkblue")
head(dat)
scatter3d(dat$ab_flu_per ~ dat$ab_flu+non_per + dat$bmi_percentile_for_age,
fit="smooth", #linear, smooth, additive
ylab="Flu season ab", xlab="Non-flu season ab", zlab="BMI p for age",
axis.col=c("darkmagenta", "black", "darkcyan"),
surface.col=c("blue", "green", "orange", "magenta", "cyan", "red",
"yellow", "gray"), surface.alpha=0.3,
neg.res.col="red", pos.res.col="darkgreen",
point.col = "darkblue")
scatter3d(dat$ab_flu_per ~ dat$ab_flu_non_per + dat$bmi_percentile_for_age,
fit="smooth", #linear, smooth, additive
ylab="Flu season ab", xlab="Non-flu season ab", zlab="BMI p for age",
axis.col=c("darkmagenta", "black", "darkcyan"),
surface.col=c("blue", "green", "orange", "magenta", "cyan", "red",
"yellow", "gray"), surface.alpha=0.3,
neg.res.col="red", pos.res.col="darkgreen",
point.col = "darkblue")
scatter3d(dat$ab_flu_per ~ dat$ab_non_flu_per + dat$bmi_percentile_for_age,
fit="smooth", #linear, smooth, additive
ylab="Flu season ab", xlab="Non-flu season ab", zlab="BMI p for age",
axis.col=c("darkmagenta", "black", "darkcyan"),
surface.col=c("blue", "green", "orange", "magenta", "cyan", "red",
"yellow", "gray"), surface.alpha=0.3,
neg.res.col="red", pos.res.col="darkgreen",
point.col = "darkblue")
